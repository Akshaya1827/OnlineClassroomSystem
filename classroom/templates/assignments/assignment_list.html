<h2>Assignments - {{ course.name }}</h2>

{% for assignment in assignments %}
<div style="border:1px solid ; padding:10px; margin:10px;">

    <h3>{{ assignment.title }}</h3>
    <p>{{ assignment.description }}</p>

    {% if assignment.due_date %}
        <p><b>Due:</b> {{ assignment.due_date }}</p>
    {% else %}
        <p><b>No Due Date</b></p>
    {% endif %}

    {% if user.role == 'student' %}

        {% with submissions|dictsort:"assignment_id" as sorted_submissions %}
        {% endwith %}

        {% for sub in submissions %}
            {% if sub.assignment.id == assignment.id %}
                <p style="color:green;"><b>Submitted</b></p>
            {% endif %}
        {% endfor %}

        <a href="{% url 'submit_assignment' assignment.id %}">
            Submit
        </a>

    {% endif %}

    {% if user.role == 'teacher' %}
        <a href="{% url 'view_submissions' assignment.id %}">
            View Submissions
        </a>
    {% endif %}

</div>
{% endfor %}
